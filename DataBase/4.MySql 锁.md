### innodb

1. innodb一定存在聚簇索引，默认以主键作为聚簇索引
2. 不考虑hash索引的情形，有几个索引，就有几棵B+树
3. 聚簇索引的叶子节点为磁盘上的真实数据，非聚簇索引的叶子节点指向聚簇索引B+树



**共享锁**(S锁):假设事务T1对数据A加上共享锁，那么事务T2**可以**读数据A，**不能**修改数据A。
**排他锁**(X锁):假设事务T1对数据A加上拍他锁，那么事务T2**不能**读数据A，**不能**修改数据A。
通过`update`、`delete`等语句加上的锁都是行级别的锁，只有`LOCK TABLE … READ`和`LOCK TABLE … WRITE`才能申请表级别的锁



**意向共享锁**(IS锁):一个事务在获取（任何一行/或者全表）S锁之前，一定会先在所在的表上加IS锁。
**意向排他锁**(IX锁):一个事务在获取（任何一行/或者全表）X锁之前，一定会先在所在的表上加IX锁





意向锁存在的目的。假设事务T1，用X锁来锁住了表上的几条记录，那么此时表上存在IX锁，即意向排他锁。那么此时事务T2要进行`LOCK TABLE … WRITE`的表级别锁的请求，可以直接根据意向锁是否存在而判断是否有锁冲突





如果`where`后的条件为精确查询，那么只存在record lock，如果`where`后的条件为范围查询，那么存在的是record lock+gap lock





















































































































