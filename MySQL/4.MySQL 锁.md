



### 表锁



### 行锁

锁住的是表中的几行



### 记录锁

只锁定表中的一行，精准条件命中，并且命中的条件字段是唯一索引



### Gap Lock

属于行锁的一种，锁住的是表的某一个区间，范围查询时会锁住表中相邻ID之间的空隙，遵循左开右闭原则



### 临间锁 Next-Key Lock

属于行锁的一种，是Innodb的默认行锁算法，临间锁会将查出来的记录和范围查询内的所有空隙锁住，相当于记录锁+Gap Lock





### 意向锁

若事务A成功加锁，则设置一个状态，告诉其他事务不能在对表加共享锁/排他锁，后面的事务要对整个表加锁时只需要读这个状态就能知道是否能加表锁，避免对整个索引树扫描是否加锁，这个状态就是意向锁

#### 意向共享锁

当一个事务试图对整张表加共享锁之前，首先要获取这张表的意向共享锁

#### 意向排他锁

当一个事务试图对整张表加排他锁之前，首先要获取这张表的意向排他锁







