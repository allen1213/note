

### QPS/TPS/CPS



`QPS`：Queries Per Second 每秒查询率，指一台服务器每秒能够响应的查询次数数据库中的每秒执行查询sql的次数），是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准

每天80%的访问集中在20%的时间里，这20%时间叫做峰值时间，其中：

```java
峰值时间每秒请求数(QPS) = ( 总PV数 * 80% ) / ( 每天秒数 * 20% ) 
如每天300w PV 的在单台机器上的QPS = ( 3000000 * 0.8 ) / (86400 * 0.2 ) = 139 
  
峰值时间每秒QPS / 单台机器的QPS = 需要的机器
一台机器的QPS是58，139 / 58 = 3
  
QPS（TPS）= 并发数/平均响应时间 
```

 

`TPS`： Transactions Per Second的 每秒事务数，一个事务是指一个客户机向服务器发送请求然后服务器 做出反应的过程，以此来计算使用的时间和完成的事务个数

具体事务的定义，可以一个接口、多个接口、一个业务流程等等，以单接口定义为事务为例，每个事务包括了如下3个过程：

1. 向服务器发请求
2. 服务器自己的内部处理（包含应用服务器、数据库服务器等）
3. 服务器返回结果给客户端

每秒能够完成N次这三个过程，TPS就是N，如果多个接口定义为一个事务，那么会重复执行abc，完成一次这几个请求，算做一个TPS



`CPS`：Connection Per Second 每秒新建连接数，指新建连接的速率，当新建连接的速率超过规格定义的每秒新建连接数时，新建连接请求将被丢弃