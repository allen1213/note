

### 支持多线程的redis6.0

严格来讲从 Redis 4.0 之后并不是单线程，除了主线程外，它也有后台线程在处理一些较为缓慢的操作，例如清理脏数据、无用连接的释放、大 Key 的删除等



Redis 6.0 的多线程默认是禁用的，只使用主线程，如需开启需要修改 redis.conf 配置文件：

```shell
io-threads-do-reads yes
```



开启多线程后，还需要设置线程数

```shell
io-threads 4
```



官方建议4 核的机器建议设置为 2 或 3 个线程，8 核的建议设置为 6 个线程，线程数一定要小于机器核数，超过了 8 个基本就没什么意义了





Redis 的多线程部分只是用来处理网络数据的读写和协议解析，执行命令仍然是单线程顺序执行，所以不需要去考虑控制 Key、Lua、事务，LPUSH/LPOP 等等的并发及线程安全问题